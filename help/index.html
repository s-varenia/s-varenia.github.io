<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<meta charset="UTF-8" />
		<link rel="shortcut icon" type="image/png" href="../files/icon-192x192.png" />
		<link rel="stylesheet" href="css/theme-custom.css" />
		<link rel="stylesheet" href="css/output.css" />

		<!-- <script src="https://cdn.tailwindcss.com"></script> -->
	</head>
	<body>
		<div id="app"></div>
		<script>
			// https://docsify.js.org/#/quickstart
			window.$docsify = {
				homepage: '_homepage.md',
				name: 'VARENIA', // название сайта на боковой панели
				executeScript: true,
				loadSidebar: true, // боковая панель из файла "_sidebar.md"
				hideSidebar: false,
				subMaxLevel: 2, // max уровень вложенности оглавления в Sidebar панели
				ext: '.md',
				// coverpage: true, // страница приветствия
				// onlyCover: true,
				// loadNavbar: true,
				// alias: {
				// 	'/gist': 'https://gist.githubusercontent.com/s-varenia/6619b7e6b907579f9b07a7061e89c456/raw/34728fa31b470512affcbfd7631d3ed68c120299/Readme.md',
				// },
				// плагин копирования кода
				copyCode: {
					buttonText: 'Copy',
					errorText: 'Error',
					successText: 'Copied',
				},
				// плагин поиска на сайте
				search: {
					maxAge: 86400000, // срок действия, по умолчанию один день
					paths: 'auto', // или 'auto'
					placeholder: 'Поиск', // надпись в поле
					noData: 'Нет результатов', // надпись без результата
					depth: 4, // глубина поиска по заголовкам, 1 - 6
				},
				plugins: [
					// https://docsify.js.org/#/write-a-plugin?id=template
					function myPlugin1(hook, vm) {
						hook.init(function () {
							// 	// window.location.hash
							// if (window.location.hash === '#/') {
							// 	console.log(vm);
							// 	console.log('Домашняя страница');
							// 	document.body.classList.add('close');
							// }
							// // 	console.log('init');
							// console.log(vm.route.path);
						});
						hook.mounted(function () {
							if (vm.route.path === `/` && !Docsify.util.isMobile) document.body.classList.add('close');
							// Docsify.dom.find('.app-name-link').innerHTML = 'hello';
							// vm.config.name = 'hello';
						});
						hook.beforeEach(function (markdown) {
							// console.log(`beforeEach`);
							// console.log(vm.frontmatter);
							// console.log(Boolean(vm.frontmatter.sidebarClose));
							// if (vm.frontmatter.sidebar && !Docsify.util.isMobile) Docsify.dom.toggleClass(Docsify.dom.$.body, 'close');
							// console.log(vm);
							document.title = 'Hello World';
							// if (vm.route.path == `/`) {
							// 	vm.config.name = 'Hello!';
							// 	console.log('Домашняя страница');
							// }
							// document.querySelector(`article`).classList.add(`max-w-full`);
							if (vm.route.path === `/` || vm.route.path === `/page3`) document.querySelector(`#main`).classList.remove(`documentation`);
							else document.querySelector(`#main`).classList.add(`documentation`);
						});
						hook.afterEach(function (html) {
							// console.log(`afterEach`);
							// console.log(vm.frontmatter);
							// console.log(html);
							// return html;
						});
						hook.doneEach(function (markdown) {
							// console.log(`doneEach`);
							// console.log(vm.frontmatter);
							// vm.config.name = 'Hello!';
							// console.log(vm.config.name);
							// console.log(vm);
						});
						hook.ready(function () {
							// console.log(`ready`);
							// console.log(vm.frontmatter);
							if (vm.frontmatter.sidebar && !Docsify.util.isMobile) Docsify.dom.toggleClass(Docsify.dom.$.body, 'close');
						});
					},
					// https://github.com/docsifyjs/docsify/issues/1235#issuecomment-1200060436
					function docsifyMetaTagsTest(hook, vm) {
						hook.beforeEach(function (markdown) {
							const hasFrontMatter = Boolean($docsify.frontMatter.installed && vm.frontmatter);

							if (!hasFrontMatter) {
								return;
							}

							const metaTags = Object.entries(vm.frontmatter);
							const reIsMetaTag = /^meta-/;

							metaTags.forEach(([key, val]) => {
								if (reIsMetaTag.test(key)) {
									const attr = key.replace(reIsMetaTag, '');
									const existingTag = document.querySelector(`meta[${attr}]`);
									const metaHTML = `<meta ${attr}="${val}" />`;

									if (existingTag) {
										existingTag.setAttribute(attr, val);

										console.log(`Update: ${metaHTML}`);
									} else {
										const appendAfterElm = document.querySelector('head > meta:last-of-type, head > *:last-child');

										appendAfterElm.insertAdjacentHTML('afterend', metaHTML);

										console.log(`Append: ${metaHTML}`);
									}
								}
							});

							return markdown;
						});
					},
				],
				vueComponents: {
					'button-counter': {
						template: `
							<button @click="count += 1">
								You clicked me {{ count }} times
							</button>
							`,
						data() {
							return {
								count: 0,
							};
						},
					},
				},
			};

			// активировать поиск по нажатию Ctrl+Q
			window.addEventListener('keydown', function (event) {
				if (event.ctrlKey && event.code === 'KeyQ') {
					document.querySelector('.input-wrap input').focus();
				}
			});
		</script>
		<script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/docsify@4.13.1/lib/docsify.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/docsify@4.13.1/lib/plugins/front-matter.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/docsify@4.13.1/lib/plugins/search.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/docsify-copy-code@2.1.1/dist/docsify-copy-code.min.js"></script>
		<script src="varenia-add-links-docsify.js"></script>
	</body>
</html>
